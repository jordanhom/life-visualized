<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Your Life Visualized</title>
    <!-- Link to the external CSS file -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <h1>Visualize Your Life</h1>

        <!-- Input Form -->
        <form id="life-input-form" class="input-form">
            <div class="form-group">
                <label for="birthdate">Your Birth Date:</label>
                <input type="date" id="birthdate" name="birthdate" required>
            </div>

            <div class="form-group">
                <label for="sex">Sex (for actuarial estimate):</label>
                <select id="sex" name="sex" required>
                    <option value="" disabled selected>-- Select --</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <!-- Add other options if your data source supports them -->
                </select>
            </div>

            <button type="submit" class="calculate-btn" id="calculate-btn">Calculate & Visualize</button>
        </form>

        <!-- Results Area -->
        <div id="results-area" class="results-area">
            <!-- Calculation results will appear here -->
            <p>Please enter your details above.</p>
        </div>

        <!-- === ADD VIEW TOGGLE CONTROLS === -->
        <fieldset class="view-toggle">
            <legend>Grid View Type:</legend>
            <div>
                <input type="radio" id="view-age" name="viewType" value="age" checked>
                <label for="view-age">Age Based (Starts at Birth)</label>
            </div>
            <div>
                <input type="radio" id="view-calendar" name="viewType" value="calendar">
                <label for="view-calendar">Calendar Year Based</label>
            </div>
        </fieldset>
        
        <!-- Explanation Section -->
        <details class="explanation-details">
            <summary>Why do some years show 53 weeks? / Why does Calendar View start indented?</summary> <!-- Optional: Update summary text -->
            <p>
                A year has 365 days (52 weeks + 1 day) or 366 in a leap year (52 weeks + 2 days). That extra day or two, plus how weeks align with calendar years, explains some visual details:
            </p>
            <ul>
                <li><strong>53-Week Years:</strong> The official ISO 8601 standard (used in <em>Calendar View</em>) sometimes assigns 53 weeks to a year based on specific rules. The <em>Age View</em> also usually overlaps with 53 standard weeks because a year isn't exactly 52 weeks long.</li>
                <li><strong>Calendar View Start:</strong> This view aligns to full calendar years. The first row shows the entire year you were born in, so any weeks within that year but *before* your actual birth date are marked as 'out-of-bounds' (faded).</li>
            </ul>
        </details>

        <!-- Grid Placeholder -->
        <div id="life-grid-container" class="life-grid-container">
            <!-- The life grid will be generated here later -->
        </div>

        <!-- Disclaimer -->
        <p class="disclaimer">
            <strong>Disclaimer:</strong> Life expectancy figures are estimates based on statistical averages for populations (using U.S. CDC/NCHS 2021 Period Life Table data) and may vary based on location, lifestyle, genetics, and future advancements. This visualization is for illustrative purposes only and is <strong>not</strong> a prediction of your individual lifespan.
        </p>

    </div>

    <!-- Load date-fns v4.1.0 via CDN -->
    <!-- Note: Integrity hash was removed previously due to loading issues -->
    <script src="https://cdn.jsdelivr.net/npm/date-fns@4.1.0/cdn.min.js"></script>

    <!-- Link to the main JavaScript file (as a module) -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
